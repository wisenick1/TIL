데이터 접근 기술 - 시작
==
> 출처 : 김영한의 [스프링 DB 2편 - 데이터 접근 활용 기술](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-db-2/dashboard)

데이터 접근 기술
--
- SQL Mapper -> SQL 직접 작성한다.
- ORM -> 객체 저장, 조회 -> 알아서 SQL을 통해 DB에 해당 객체 저장, 조회

설계
--
- Interface를 활용하여 DI를 해주는 것은 좋으나 Service는 핵심 로직이라 크게 바뀔 일이 없어 Interface로 만든지 않아도 된다.
- DTO 위치 -> 의존관계상 해당 DTO가 최종적으로 누구 것이 되냐를 따지고 해당 패키지에 두는 것이 맞다.
- 해당 프로젝트에서는 Repository가 사실상 가지고 사용하며, service는 repository를 가져다 쓰므로 Repository에 해당 DTO를 두는 것이 맞다.
- 만약 service에서 사용하고 더이상 repository에 넘겨주지 않는 dto일 경우, service에 DTO를 두는 것이 맞다.
- 즉 DTO를 제공하는 마지막이 어디냐를 봐야하는 것
- 만약 기준이 애매하다면 별도 package에 두면 된다.

@EventListener
--
- @EventListenr(ApplicationReadyEvent.class) 는 AOP를 포함한 스프링 컨테이너가 완전히 초기화 된 이후에 호출
-반면, @PostConstruct는 @Transactional 같은 AOP가 적용되지 않은 상태로 호출될 수 있어, 문제가 발생할 수 있다.

@Profile
--
- 스프링은 로딩 시점에 application.properties의 spring.profiles.active 속성을 읽어 프로필로 사용
- 따라서 @Profile("local") 같이 적용할 시 spring.profiles.active=local 일 때만 해당 애노테이션이 붙은 메소드가 작동한다.

테스트
--
- 테스트를 작성할 시 인터페이스를 테스트하도록 구현하자
- 다른 구현체 변경 시에도 같은 테스트를 사용할 수 있다!