S3 - 파일 및 이미지 업로드
==

S3
--
파일 저장 서비스
- EC2 내부에 이미지 저장할 수 있지만 파일들이 너무 많아지고 지저분해짐

버킷, 객체
--
버킷 - 하나의 저장소

객체 - 하나의 파일
- S3에 업로드된 파일

S3 생성하기
-- 
1. 버킷 이름 설정
2. 모든 퍼블릭 엑세스 차단 풀어주기 - 사용자 누구나 접근할 수 있도록 만들어야 한다.

버킷 정책 추가하기
--
정책 - 권한을 정의하는 JSON 문서

버킷에서 사용자들이 이미지를 다운로드할 수 있어야 한다.
1. 새 문 추가 - S3
2. 문 편집 - GetObject -> 파일을 다운로드 할 수 있게
3. 리소스 추가 - 리소스 ARN -> 버킷 이름 + 객체(* - 모든 객체) 추가해주기
4. Statement - principal에 "*" - 주체가 모든 사람이다.

IAM에서 엑세스 키 발급받기
--
백엔드 서버가 S3에 파일 업로드를 할 수 있어야 한다.
1. IAM에서 사용자
2. 사용자 추가
3. 권한 설정 - 직접 정책 연결 -> S3Full
4. 권한은 만들었으니 S3에 접속할 키가 필요하다 -> 엑세스 키 만들기
5. 만든 사용자에서 보안 자격 증명
6. 엑세스 키 만들기
7. 엑세스 키 - AWS 외부에서 실행되는 애플리케이션 -> 만들기

SpringBoot 서버에서 사용하기
--
> ```
> server:
>	port: 80
> spring:
>	datasource:
>		url: jdbc:mysql://_________:3306/instagram # RDS 인스턴스 엔드포인트
>		username: ______ # RDS 마스터 사용자 이름
>		password: ______ # RDS 마스터 암호
>		driver-class-name: com.mysql.cj.jdbc.Driver
>	jpa:
>		hibernate:
>			ddl-auto: create
>		show-sql: true
>	cloud:
>		aws:
>		    credentials:
>				access-key: _________ # IAM 통해서 발급받은 액세스 키
>				secret-key: _________ # IAM 통해서 발급받은 비밀 액세스 키
>			s3:
>				bucket: _______ # 생성한 S3 버킷명
>			region:
>				static: ap-northeast-2
> ```
요런식으로 application.yml을 구성

종료
--
종료 잊지 않기 - 객체부터 삭제

> 출처 : JSCODE 박재성의 [비전공자도 이해할 수 있는 AWS 입문/실전](https://www.inflearn.com/course/비전공자-이해할수있는-aws-입문실전/dashboard)